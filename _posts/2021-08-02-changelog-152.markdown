---
layout: post
title: "IntelliJ Rust Changelog #152"
date: 2021-08-02 17:00:00 +0300
---


## New Features

* [#7563] Add option to enable unused import inspection in doctests

* [#7559] Suggest simplify dependency specification for inline tables in Cargo.toml dependencies

* [#7551] improve lambda's parameter name suggestion

* [#7536] TYPE: show autocompletion popup when typing `|`

* [#7532] Add quick fix to implement missing supertrait(s) for a trait impl block. (by [@Kobzol])

* [#7519] Add postfix template named `.wrap` that wraps an existing type with another type. (by [@Kobzol])

* [#7499] added a new filter to the Structure View panel, which toggles whether macro-generated items should be included in the Structure View. (by [@afetisov])

* [#7495] The import optimizer will now remove unused imports. (by [@Kobzol])

* [#7492] Add a quick fix to remove an unused import. (by [@Kobzol])

* [#7487] Add completion for lambdas in expression positions that expect a function. (by [@Kobzol])

* [#7481] Add completion for `pub(crate)` and `pub()` visibility modifers. (by [@Kobzol])

* [#7480] Add intention to implement a trait for a struct or enum. (by [@Kobzol])

* [#7479] TY&RES: support const arguments that looks like type arguments

* [#7321] FEATURE: `show macro expansion` actions and intentions now show a reason of the expansion failure. INTERNAL: improve macro expansion error types & error handling

* [#7308] Provide an experimental feature to add `--nocapture` flag to `cargo test` command

* [#7228] Make links that look like Rust identifiers or paths (e.g., A, A::B, A::B::C) work correctly in quick documentation by prepending `psi_element://` to them. It fixes #7209
Now clickable links inside stdlib docs should work properly. (by [@shocoman])

* [#6838] Add intention to convert local named functions to lambdas (by [@nschoellhorn])

* [#6813] Added intentions to convert from lambdas to named local functions and vice versa (by [@nschoellhorn])

* [#6414] Add intention to replace redundant wildcards with a single `..` (by [@zeroeightysix])

* [#6410]  (by [@zeroeightysix])

* [#6060] ANN: Check if the asm macro is contained in an unsafe block or function (by [@Stzx])

* [#6003] Allow inlining functions (using `Inline Function` refactoring) with diverging exit points (like `panic!()`). (by [@SaarYogev])

## Performance Improvements

* [#7576] Slightly optimize "Find usage" inside files with child modules

## Fixes

* [#7574] Support usages in derive proc macros in unused imports inspection

* [#7571] Fix formatting of completed trait items in trait impls. (by [@Kobzol])

* [#7567] Render const generics in "Parameter Info"

* [#7564] Ignore cfg-disabled imports when removing unused imports

* [#7555] Fix false-positives related to unresolved method calls in unused imports inspection

* [#7553] Up/Down mover: add a trailing comma even when there are multiple elements in the last line (by [@t-kameyama])

* [#7552] move `Unused import` inspection into `Rust/Lints` inspection group in settings

* [#7547] don't offer live templates (like `p` that inserts `println!()`) in patterns

* [#7546] INSP: add comma to match arm if needed in "Lift return out" (by [@t-kameyama])

* [#7540] Filter out existing features in dependency features completion

* [#7538] INSP: Disable unused import inspection in doctests

* [#7535] Support method calls using type qualifier in unused import inspection

* [#7534] Improve completion of items inside impl trait. (by [@Kobzol])

* [#7527] Enable [Go to generated declaration](https://plugins.jetbrains.com/plugin/8182-rust/docs/wasm-projects-support.html#goto-wasm-bindgen) line marker in WASM projects for 2021.2 platform

* [#7516] COMP: fix autoimport-aware completion after completion at empty place

* [#7496] Fix handling cfg-disabled code in unused import inspection

* [#7428] Show crate roots first in the project view

* [#7411] Take into account the CARGO_HOME environment variable when using crates local index

* [#7383] Fix intention to convert an `impl trait` parameter to a generic parameter when the corresponding function already has const parameters. (by [@Kobzol])

* [#7334] Do not warn about missing format macro arguments if `format_args_capture` feature is enabled. (by [@Kobzol])

* [#7168] Fix false-positive [E0603](https://doc.rust-lang.org/error-index.html#E0603) "Module is private" when using new name resolution engine

* [#7120] Take into account `pub(crate)` visibility in auto-import

* [#6904] Up/Down mover: move vec macro arguments (by [@t-kameyama])

## Internal Improvements

* [#7521] TY: lift aliasedBy from TyAdt to Ty (by [@Kobzol])

* [#7512] Introduce new `RsTemplateBuilder` API

* [#7503] TY: convert primitive types from object to class (by [@Kobzol])

* [#7482] COMP: fix RsCompletionTestFixtureBase::checkCompletion (by [@Kobzol])

* [#7452] RUN: Use `FormattingService` on 212

* [#7321] FEATURE: `show macro expansion` actions and intentions now show a reason of the expansion failure. INTERNAL: improve macro expansion error types & error handling

Full set of changes can be found [here](https://github.com/intellij-rust/intellij-rust/milestone/60?closed=1)

[@Kobzol]: https://github.com/Kobzol
[@SaarYogev]: https://github.com/SaarYogev
[@Stzx]: https://github.com/Stzx
[@afetisov]: https://github.com/afetisov
[@nschoellhorn]: https://github.com/nschoellhorn
[@shocoman]: https://github.com/shocoman
[@t-kameyama]: https://github.com/t-kameyama
[@zeroeightysix]: https://github.com/zeroeightysix

[#6003]: https://github.com/intellij-rust/intellij-rust/pull/6003
[#6060]: https://github.com/intellij-rust/intellij-rust/pull/6060
[#6410]: https://github.com/intellij-rust/intellij-rust/pull/6410
[#6414]: https://github.com/intellij-rust/intellij-rust/pull/6414
[#6813]: https://github.com/intellij-rust/intellij-rust/pull/6813
[#6838]: https://github.com/intellij-rust/intellij-rust/pull/6838
[#6904]: https://github.com/intellij-rust/intellij-rust/pull/6904
[#7120]: https://github.com/intellij-rust/intellij-rust/pull/7120
[#7168]: https://github.com/intellij-rust/intellij-rust/pull/7168
[#7228]: https://github.com/intellij-rust/intellij-rust/pull/7228
[#7308]: https://github.com/intellij-rust/intellij-rust/pull/7308
[#7321]: https://github.com/intellij-rust/intellij-rust/pull/7321
[#7334]: https://github.com/intellij-rust/intellij-rust/pull/7334
[#7383]: https://github.com/intellij-rust/intellij-rust/pull/7383
[#7411]: https://github.com/intellij-rust/intellij-rust/pull/7411
[#7428]: https://github.com/intellij-rust/intellij-rust/pull/7428
[#7452]: https://github.com/intellij-rust/intellij-rust/pull/7452
[#7479]: https://github.com/intellij-rust/intellij-rust/pull/7479
[#7480]: https://github.com/intellij-rust/intellij-rust/pull/7480
[#7481]: https://github.com/intellij-rust/intellij-rust/pull/7481
[#7482]: https://github.com/intellij-rust/intellij-rust/pull/7482
[#7487]: https://github.com/intellij-rust/intellij-rust/pull/7487
[#7492]: https://github.com/intellij-rust/intellij-rust/pull/7492
[#7495]: https://github.com/intellij-rust/intellij-rust/pull/7495
[#7496]: https://github.com/intellij-rust/intellij-rust/pull/7496
[#7499]: https://github.com/intellij-rust/intellij-rust/pull/7499
[#7503]: https://github.com/intellij-rust/intellij-rust/pull/7503
[#7512]: https://github.com/intellij-rust/intellij-rust/pull/7512
[#7516]: https://github.com/intellij-rust/intellij-rust/pull/7516
[#7519]: https://github.com/intellij-rust/intellij-rust/pull/7519
[#7521]: https://github.com/intellij-rust/intellij-rust/pull/7521
[#7527]: https://github.com/intellij-rust/intellij-rust/pull/7527
[#7532]: https://github.com/intellij-rust/intellij-rust/pull/7532
[#7534]: https://github.com/intellij-rust/intellij-rust/pull/7534
[#7535]: https://github.com/intellij-rust/intellij-rust/pull/7535
[#7536]: https://github.com/intellij-rust/intellij-rust/pull/7536
[#7538]: https://github.com/intellij-rust/intellij-rust/pull/7538
[#7540]: https://github.com/intellij-rust/intellij-rust/pull/7540
[#7546]: https://github.com/intellij-rust/intellij-rust/pull/7546
[#7547]: https://github.com/intellij-rust/intellij-rust/pull/7547
[#7551]: https://github.com/intellij-rust/intellij-rust/pull/7551
[#7552]: https://github.com/intellij-rust/intellij-rust/pull/7552
[#7553]: https://github.com/intellij-rust/intellij-rust/pull/7553
[#7555]: https://github.com/intellij-rust/intellij-rust/pull/7555
[#7559]: https://github.com/intellij-rust/intellij-rust/pull/7559
[#7563]: https://github.com/intellij-rust/intellij-rust/pull/7563
[#7564]: https://github.com/intellij-rust/intellij-rust/pull/7564
[#7567]: https://github.com/intellij-rust/intellij-rust/pull/7567
[#7571]: https://github.com/intellij-rust/intellij-rust/pull/7571
[#7574]: https://github.com/intellij-rust/intellij-rust/pull/7574
[#7576]: https://github.com/intellij-rust/intellij-rust/pull/7576
